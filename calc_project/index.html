<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <link rel="stylesheet" href="./main.css" />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <table id="calc">
      <tr>
        <th>Mệnh giá</th>
        <th>Số lượng</th>
        <th>Thành tiền</th>
      </tr>
      <tr>
        <td>500.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>200.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>100.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>50.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>20.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>10.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>5.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>2.000 đ</td>
        <td>
          <input
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <td>1.000 đ</td>
        <td>
          <input
            id="thai"
            onchange="handleClick()"
            class="amount"
            type="number"
            value="0"
          />
        </td>
        <td class="money">0</td>
      </tr>

      <tr>
        <th>Tổng cộng:</th>
        <th></th>
        <th id="total">0</th>
      </tr>
    </table>

    <script>
      var thai = document.getElementById("thai");
      var amountLists = document.getElementsByClassName("amount");
      var moneyLists = document.getElementsByClassName("money");
      var total = document.getElementById("total");
      var menhGia = [
        500000, 200000, 100000, 50000, 20000, 10000, 5000, 2000, 1000,
      ];
      var totalLists = [0, 0, 0, 0, 0, 0, 0, 0, 0];

      document.addEventListener("click", handleClick);

      for (var i = 0; i < amountLists.length; i++) {
        amountLists[i].addEventListener("click", (e) => {
          if (e.target.value === "0") e.target.value = "";
        });
        amountLists[i].addEventListener("blur", (e) => {
          if (e.target.value === "") e.target.value = "0";
          if (e.target.value === "03111997") alert("Thái nè !");
        });
      }

      var sumReducer = (initialValue, current) => initialValue + current;

      function handleClick(e) {
        var i;
        for (i = 0; i < amountLists.length; i++) {
          totalLists[i] = +amountLists[i].value * menhGia[i];
          moneyLists[i].textContent = (
            +amountLists[i].value * menhGia[i]
          ).toLocaleString({ style: "currency", currency: "VND" });
        }
        total.textContent = totalLists
          .reduce(sumReducer, 0)
          .toLocaleString({ style: "currency", currency: "VND" });
      }
    </script>
  </body>
</html>
